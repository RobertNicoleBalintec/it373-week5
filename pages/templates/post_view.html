{% extends 'base.html' %}
{% block title %}{{ post.title }}{% endblock %}
{% block content %}
  <h1>{{ post.title }} | <span><small>Posted {{ post.created_at|timesince }} ago</small></span></h1>

  <span>
    <a href="{% url 'post_update' post.pk %}">Edit</a> |
    <a href="{% url 'post_delete' post.pk %}">Delete</a>
  </span>

  <p>{{ post.body }}</p>

  <h4>Comments ({{ comments.count }})</h4>
  <ul>
    {% for comment in comments %}
      <li><strong>{{ comment.author }}:</strong> {{ comment.body }} | {{ comment.created_at|timesince }} ago</li>
    {% empty %}
      <li>No comments yet.</li>
    {% endfor %}
  </ul>

  <h4>Add a Comment</h4>
  <form method="post">
    {% csrf_token %}
    {{ form.non_field_errors }}
    <div>
      {{ form.author.label_tag }}
      {{ form.author }}
      {% for error in form.author.errors %}
        <span style="color:red;">{{ error }}</span>
      {% endfor %}
    </div>
    <div>
      {{ form.body.label_tag }}
      {{ form.text }}
      {% for error in form.text.errors %}
        <span style="color:red;">{{ error }}</span>
      {% endfor %}
    </div>
    <button type="submit">Submit</button>
  </form>
{% endblock %}